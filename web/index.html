<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SAT Prep Pro - Ace the SAT with Expert Mock Tests</title>
  <meta name="description" content="Realistic SAT mock tests, personalized study plans, and proven strategies to boost your SAT score. Join thousands of successful students today.">
  <meta name="keywords" content="SAT prep, SAT practice, SAT mock test, SAT online, college board, SAT score, SAT exam">
  <meta name="author" content="SAT Prep Pro">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yourdomain.com/">
  <meta property="og:title" content="SAT Prep Pro - Ace the SAT with Expert Mock Tests">
  <meta property="og:description" content="Realistic SAT mock tests, personalized study plans, and proven strategies to boost your SAT score.">
  <meta property="og:image" content="https://yourdomain.com/og-image.jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://yourdomain.com/">
  <meta property="twitter:title" content="SAT Prep Pro - Ace the SAT with Expert Mock Tests">
  <meta property="twitter:description" content="Realistic SAT mock tests, personalized study plans, and proven strategies to boost your SAT score.">
  <meta property="twitter:image" content="https://yourdomain.com/og-image.jpg">

  <link rel="canonical" href="https://yourdomain.com/">

  <script>
    // SEO tag management functions
    function setTitle(title) {
      document.title = title + ' | SAT Prep Pro';
    }

    function setMetaTag(name, content) {
      let tag = document.querySelector(`meta[name="${name}"]`);
      if (!tag) {
        tag = document.createElement('meta');
        tag.setAttribute('name', name);
        document.head.appendChild(tag);
      }
      tag.setAttribute('content', content);
    }

    function setOGTag(property, content) {
      let tag = document.querySelector(`meta[property="${property}"]`);
      if (!tag) {
        tag = document.createElement('meta');
        tag.setAttribute('property', property);
        document.head.appendChild(tag);
      }
      tag.setAttribute('content', content);
    }

    function setCanonical(url) {
      let tag = document.querySelector('link[rel="canonical"]');
      if (!tag) {
        tag = document.createElement('link');
        tag.setAttribute('rel', 'canonical');
        document.head.appendChild(tag);
      }
      tag.setAttribute('href', url);
    }

    // Fixed SEO handler with correct route-based logic
    function updateSEOTags() {
      const path = window.location.hash;

      // Handle blog post URLs: /#/blog/slug-here
      if (path.startsWith('#/blog/')) {
        const slug = path.split('#/blog/')[1];
        fetch(`https://blog-api.tejasbalkhande221.workers.dev/api/blog/${slug}`)
          .then(res => {
            if (!res.ok) throw new Error('Blog post not found');
            return res.json();
          })
          .then(post => {
            setTitle(post.title);
            setMetaTag('description', post.metaDescription);
            setOGTag('og:title', post.title);
            setOGTag('og:description', post.metaDescription);
            setOGTag('og:image', post.coverImageUrl || 'https://yourdomain.com/default-og.jpg');
            setOGTag('og:url', `https://yourdomain.com/#/blog/${slug}`);
            setCanonical(`https://yourdomain.com/#/blog/${slug}`);
          })
          .catch(error => {
            console.error('SEO fetch error:', error);
            setDefaultTags();
          });
      }
      // Handle blog listing page - fixed to exact match
      else if (path === '#/blogs') {
        setTitle('SAT Prep Blog');
        setMetaTag('description', 'Expert SAT preparation tips and strategies');
        setOGTag('og:title', 'SAT Prep Blog');
        setOGTag('og:description', 'Expert SAT preparation tips and strategies');
        setOGTag('og:image', 'https://yourdomain.com/blog-og.jpg');
        setOGTag('og:url', 'https://yourdomain.com/#/blogs');
        setCanonical('https://yourdomain.com/#/blogs');
      }
      // Default SEO tags for all other pages
      else {
        setDefaultTags();
      }
    }

    function setDefaultTags() {
      setTitle('SAT Prep Pro - Ace the SAT with Expert Mock Tests');
      setMetaTag('description', 'Realistic SAT mock tests and study plans');
      setOGTag('og:title', 'SAT Prep Pro - Ace the SAT with Expert Mock Tests');
      setOGTag('og:description', 'Realistic SAT mock tests and study plans');
      setOGTag('og:image', 'https://yourdomain.com/og-image.jpg');
      setOGTag('og:url', 'https://yourdomain.com/');
      setCanonical('https://yourdomain.com/');
    }

    // Initialize SEO on first load and route changes
    window.addEventListener('DOMContentLoaded', updateSEOTags);
    window.addEventListener('hashchange', updateSEOTags);
  </script>

  <!-- Localhost build error handling for Flutter -->
  <script>
    if (window.location.hostname === 'localhost') {
      window.addEventListener('flutter-build-error', function(e) {
        window.dispatchEvent(new Event('flutter-first-frame'));
      });
    }
  </script>
</head>
<body>
<script src="main.dart.js" type="application/javascript"></script>
</body>
</html>